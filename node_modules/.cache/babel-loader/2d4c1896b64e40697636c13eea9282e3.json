{"ast":null,"code":"import _slicedToArray from\"/home/rafaelchs/courseWork2022/Week5/user_hub_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{NavLink}from'react-router-dom';// NEW\nimport{storeCurrentUser,clearCurrentUser}from'../auth';import'./header.css';var Header=function Header(_ref){var currentUser=_ref.currentUser,setCurrentUser=_ref.setCurrentUser,userList=_ref.userList;var _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedUser=_useState2[0],setSelectedUser=_useState2[1];useEffect(function(){setSelectedUser(userList[0]);},[userList]);var handleSubmit=function handleSubmit(event){event.preventDefault();};var handleSelectChange=function handleSelectChange(event){var id=event.target.value;var user=userList.find(function(user){return user.id==id;});setSelectedUser(user);};var handleUserLogin=function handleUserLogin(event){storeCurrentUser(selectedUser);// NEW\nsetCurrentUser(selectedUser);};var handleUserLogout=function handleUserLogout(event){setSelectedUser(userList[0]);clearCurrentUser();// NEW\nsetCurrentUser(null);};return/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Welcome to UserHub\"),/*#__PURE__*/React.createElement(\"form\",{className:\"user-select\",onSubmit:handleSubmit},currentUser?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NavLink,{to:\"/posts\",activeClassName:\"current\"},\"POSTS\"),/*#__PURE__*/React.createElement(NavLink,{to:\"/todos\",activeClassName:\"current\"},\"TODOS\"),/*#__PURE__*/React.createElement(\"button\",{onClick:handleUserLogout},\"LOG OUT, \",currentUser.username)):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"select\",{onChange:handleSelectChange},userList.map(function(user){return/*#__PURE__*/React.createElement(\"option\",{key:user.id,value:user.id},user.username);})),/*#__PURE__*/React.createElement(\"button\",{onClick:handleUserLogin},\"LOG IN\"))));};export default Header;","map":{"version":3,"names":["React","useState","useEffect","NavLink","storeCurrentUser","clearCurrentUser","Header","currentUser","setCurrentUser","userList","selectedUser","setSelectedUser","handleSubmit","event","preventDefault","handleSelectChange","id","target","value","user","find","handleUserLogin","handleUserLogout","username","map"],"sources":["/home/rafaelchs/courseWork2022/Week5/user_hub_react/src/components/header.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { NavLink } from 'react-router-dom';\n\n// NEW\nimport {\n  storeCurrentUser,\n  clearCurrentUser\n} from '../auth';\n\nimport './header.css';\n\nconst Header = ({\n  currentUser,\n  setCurrentUser,\n  userList \n}) => {\n  const [selectedUser, setSelectedUser] = useState();\n\n  useEffect(() => {\n    setSelectedUser(userList[0]);\n  }, [ userList ]);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n  }\n\n  const handleSelectChange = (event) => {\n    const id = event.target.value;\n    const user = userList.find(user => user.id == id);\n    setSelectedUser(user);\n  }\n\n  const handleUserLogin = (event) => {\n    storeCurrentUser(selectedUser); // NEW\n    setCurrentUser(selectedUser);\n  }\n\n  const handleUserLogout = (event) => {\n    setSelectedUser(userList[0]);\n    clearCurrentUser(); // NEW\n    setCurrentUser(null);\n  }\n\n  return (\n    <header>\n      <h1>Welcome to UserHub</h1>\n      <form \n        className=\"user-select\" \n        onSubmit={ handleSubmit } >\n        {\n          currentUser\n          ? <> \n              <NavLink to=\"/posts\" activeClassName=\"current\">POSTS</NavLink>\n              <NavLink to=\"/todos\" activeClassName=\"current\">TODOS</NavLink>\n              <button onClick={ handleUserLogout }>LOG OUT, { currentUser.username }</button>\n            </>\n          : <>\n              <select onChange={ handleSelectChange }>{\n                userList.map(user => (\n                  <option key={ user.id } value={ user.id }>\n                    { user.username }\n                  </option>\n                ))\n              }</select>\n              <button onClick={ handleUserLogin }>LOG IN</button>\n            </>\n        }\n      </form>\n    </header>\n  );\n}\n\nexport default Header;"],"mappings":"0KAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,kBAAxB,CAEA;AACA,OACEC,gBADF,CAEEC,gBAFF,KAGO,SAHP,CAKA,MAAO,cAAP,CAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,MAIT,IAHJC,YAGI,MAHJA,WAGI,CAFJC,cAEI,MAFJA,cAEI,CADJC,QACI,MADJA,QACI,CACJ,cAAwCR,QAAQ,EAAhD,wCAAOS,YAAP,eAAqBC,eAArB,eAEAT,SAAS,CAAC,UAAM,CACdS,eAAe,CAACF,QAAQ,CAAC,CAAD,CAAT,CAAf,CACD,CAFQ,CAEN,CAAEA,QAAF,CAFM,CAAT,CAIA,GAAMG,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAW,CAC9BA,KAAK,CAACC,cAAN,GACD,CAFD,CAIA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,CAACF,KAAD,CAAW,CACpC,GAAMG,GAAE,CAAGH,KAAK,CAACI,MAAN,CAAaC,KAAxB,CACA,GAAMC,KAAI,CAAGV,QAAQ,CAACW,IAAT,CAAc,SAAAD,IAAI,QAAIA,KAAI,CAACH,EAAL,EAAWA,EAAf,EAAlB,CAAb,CACAL,eAAe,CAACQ,IAAD,CAAf,CACD,CAJD,CAMA,GAAME,gBAAe,CAAG,QAAlBA,gBAAkB,CAACR,KAAD,CAAW,CACjCT,gBAAgB,CAACM,YAAD,CAAhB,CAAgC;AAChCF,cAAc,CAACE,YAAD,CAAd,CACD,CAHD,CAKA,GAAMY,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACT,KAAD,CAAW,CAClCF,eAAe,CAACF,QAAQ,CAAC,CAAD,CAAT,CAAf,CACAJ,gBAAgB,GAAI;AACpBG,cAAc,CAAC,IAAD,CAAd,CACD,CAJD,CAMA,mBACE,+CACE,mDADF,cAEE,4BACE,SAAS,CAAC,aADZ,CAEE,QAAQ,CAAGI,YAFb,EAIIL,WAAW,cACT,qDACE,oBAAC,OAAD,EAAS,EAAE,CAAC,QAAZ,CAAqB,eAAe,CAAC,SAArC,UADF,cAEE,oBAAC,OAAD,EAAS,EAAE,CAAC,QAAZ,CAAqB,eAAe,CAAC,SAArC,UAFF,cAGE,8BAAQ,OAAO,CAAGe,gBAAlB,cAAgDf,WAAW,CAACgB,QAA5D,CAHF,CADS,cAMT,qDACE,8BAAQ,QAAQ,CAAGR,kBAAnB,EACEN,QAAQ,CAACe,GAAT,CAAa,SAAAL,IAAI,qBACf,8BAAQ,GAAG,CAAGA,IAAI,CAACH,EAAnB,CAAwB,KAAK,CAAGG,IAAI,CAACH,EAArC,EACIG,IAAI,CAACI,QADT,CADe,EAAjB,CADF,CADF,cAQE,8BAAQ,OAAO,CAAGF,eAAlB,WARF,CAVN,CAFF,CADF,CA2BD,CA3DD,CA6DA,cAAef,OAAf"},"metadata":{},"sourceType":"module"}