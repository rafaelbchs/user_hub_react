{"ast":null,"code":"import _slicedToArray from\"/home/rafaelchs/courseWork2022/Week5/user_hub_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import{BrowserRouter as Router,Route,Switch,Redirect}from'react-router-dom';import{Header,UserPosts,UserTodos}from'./components';import{getUsers,getPostsByUser,getTodosByUser}from'./api';// NEW\nimport{getCurrentUser}from'./auth';var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userList=_useState2[0],setUserList=_useState2[1];// MODIFIED\nvar _useState3=useState(getCurrentUser()),_useState4=_slicedToArray(_useState3,2),currentUser=_useState4[0],setCurrentUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),userPosts=_useState6[0],setUserPosts=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),userTodos=_useState8[0],setUserTodos=_useState8[1];useEffect(function(){getUsers().then(function(users){setUserList(users);}).catch(function(error){// something something errors\n});},[]);useEffect(function(){if(!currentUser){setUserPosts([]);setUserTodos([]);return;}getPostsByUser(currentUser.id).then(function(posts){setUserPosts(posts);}).catch(function(error){// something something errors\n});getTodosByUser(currentUser.id).then(function(todos){setUserTodos(todos);}).catch(function(error){// something something errors\n});},[currentUser]);return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",{id:\"App\"},/*#__PURE__*/React.createElement(Header,{userList:userList,currentUser:currentUser,setCurrentUser:setCurrentUser}),currentUser?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/posts\"},/*#__PURE__*/React.createElement(UserPosts,{userPosts:userPosts,currentUser:currentUser})),/*#__PURE__*/React.createElement(Route,{path:\"/todos\"},/*#__PURE__*/React.createElement(UserTodos,{userTodos:userTodos,currentUser:currentUser})),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(\"h2\",{style:{padding:\".5em\"}},\"Welcome, \",currentUser.username,\"!\")),/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(\"h2\",{style:{padding:\".5em\"}},\"Please log in, above.\")),/*#__PURE__*/React.createElement(Redirect,{to:\"/\"})))));};ReactDOM.render(/*#__PURE__*/React.createElement(App,null),document.getElementById('root'));","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","BrowserRouter","Router","Route","Switch","Redirect","Header","UserPosts","UserTodos","getUsers","getPostsByUser","getTodosByUser","getCurrentUser","App","userList","setUserList","currentUser","setCurrentUser","userPosts","setUserPosts","userTodos","setUserTodos","then","users","catch","error","id","posts","todos","padding","username","render","document","getElementById"],"sources":["/home/rafaelchs/courseWork2022/Week5/user_hub_react/src/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  Redirect\n} from 'react-router-dom';\n\nimport {\n  Header,\n  UserPosts,\n  UserTodos\n} from './components';\n\nimport {\n  getUsers,\n  getPostsByUser,\n  getTodosByUser\n} from './api';\n\n// NEW\nimport {\n  getCurrentUser\n} from './auth';\n\nconst App = () => {\n  const [userList, setUserList] = useState([]);\n\n  // MODIFIED\n  const [currentUser, setCurrentUser] = useState(getCurrentUser());\n\n  const [userPosts, setUserPosts] = useState([]);\n  const [userTodos, setUserTodos] = useState([]);\n\n  useEffect(() => {\n    getUsers()\n      .then(users => {\n        setUserList(users)\n      })\n      .catch(error => {\n        // something something errors\n      });\n  }, []);\n\n  useEffect(() => {\n    if (!currentUser) {\n      setUserPosts([]);\n      setUserTodos([]);\n      return;\n    }\n\n    getPostsByUser(currentUser.id)\n      .then(posts => {\n        setUserPosts(posts);\n      })\n      .catch(error => {\n        // something something errors\n      });\n\n    getTodosByUser(currentUser.id)\n      .then(todos => {\n        setUserTodos(todos);\n      })\n      .catch(error => {\n        // something something errors\n      });\n  }, [currentUser]);\n\n  return (\n    <Router>\n      <div id=\"App\">\n        <Header\n          userList={ userList }\n          currentUser={ currentUser }\n          setCurrentUser={ setCurrentUser } />\n        {\n          currentUser\n          ? <>\n              <Switch>\n                <Route path=\"/posts\">\n                  <UserPosts\n                    userPosts={ userPosts }\n                    currentUser={ currentUser } />\n                </Route>\n                <Route path=\"/todos\">\n                  <UserTodos\n                    userTodos={ userTodos }\n                    currentUser={ currentUser } />\n                </Route>\n                <Route exact path=\"/\">\n                  <h2 style={{\n                    padding: \".5em\"\n                  }}>Welcome, { currentUser.username }!</h2>\n                </Route>\n                <Redirect to=\"/\" />\n              </Switch>\n            </>\n          : <>\n              <Switch>\n                <Route exact path=\"/\">\n                  <h2 style={{\n                    padding: \".5em\"\n                  }}>Please log in, above.</h2>\n                </Route>\n                <Redirect to=\"/\" />\n              </Switch>\n            </>\n        }\n      </div>\n    </Router>\n  );\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"mappings":"0KAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,SAAP,KAAqB,WAArB,CAEA,OACEC,aAAa,GAAIC,OADnB,CAEEC,KAFF,CAGEC,MAHF,CAIEC,QAJF,KAKO,kBALP,CAOA,OACEC,MADF,CAEEC,SAFF,CAGEC,SAHF,KAIO,cAJP,CAMA,OACEC,QADF,CAEEC,cAFF,CAGEC,cAHF,KAIO,OAJP,CAMA;AACA,OACEC,cADF,KAEO,QAFP,CAIA,GAAMC,IAAG,CAAG,QAANA,IAAM,EAAM,CAChB,cAAgCf,QAAQ,CAAC,EAAD,CAAxC,wCAAOgB,QAAP,eAAiBC,WAAjB,eAEA;AACA,eAAsCjB,QAAQ,CAACc,cAAc,EAAf,CAA9C,yCAAOI,WAAP,eAAoBC,cAApB,eAEA,eAAkCnB,QAAQ,CAAC,EAAD,CAA1C,yCAAOoB,SAAP,eAAkBC,YAAlB,eACA,eAAkCrB,QAAQ,CAAC,EAAD,CAA1C,yCAAOsB,SAAP,eAAkBC,YAAlB,eAEAtB,SAAS,CAAC,UAAM,CACdU,QAAQ,GACLa,IADH,CACQ,SAAAC,KAAK,CAAI,CACbR,WAAW,CAACQ,KAAD,CAAX,CACD,CAHH,EAIGC,KAJH,CAIS,SAAAC,KAAK,CAAI,CACd;AACD,CANH,EAOD,CARQ,CAQN,EARM,CAAT,CAUA1B,SAAS,CAAC,UAAM,CACd,GAAI,CAACiB,WAAL,CAAkB,CAChBG,YAAY,CAAC,EAAD,CAAZ,CACAE,YAAY,CAAC,EAAD,CAAZ,CACA,OACD,CAEDX,cAAc,CAACM,WAAW,CAACU,EAAb,CAAd,CACGJ,IADH,CACQ,SAAAK,KAAK,CAAI,CACbR,YAAY,CAACQ,KAAD,CAAZ,CACD,CAHH,EAIGH,KAJH,CAIS,SAAAC,KAAK,CAAI,CACd;AACD,CANH,EAQAd,cAAc,CAACK,WAAW,CAACU,EAAb,CAAd,CACGJ,IADH,CACQ,SAAAM,KAAK,CAAI,CACbP,YAAY,CAACO,KAAD,CAAZ,CACD,CAHH,EAIGJ,KAJH,CAIS,SAAAC,KAAK,CAAI,CACd;AACD,CANH,EAOD,CAtBQ,CAsBN,CAACT,WAAD,CAtBM,CAAT,CAwBA,mBACE,oBAAC,MAAD,mBACE,2BAAK,EAAE,CAAC,KAAR,eACE,oBAAC,MAAD,EACE,QAAQ,CAAGF,QADb,CAEE,WAAW,CAAGE,WAFhB,CAGE,cAAc,CAAGC,cAHnB,EADF,CAMID,WAAW,cACT,qDACE,oBAAC,MAAD,mBACE,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,eACE,oBAAC,SAAD,EACE,SAAS,CAAGE,SADd,CAEE,WAAW,CAAGF,WAFhB,EADF,CADF,cAME,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,eACE,oBAAC,SAAD,EACE,SAAS,CAAGI,SADd,CAEE,WAAW,CAAGJ,WAFhB,EADF,CANF,cAWE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,eACE,0BAAI,KAAK,CAAE,CACTa,OAAO,CAAE,MADA,CAAX,cAEcb,WAAW,CAACc,QAF1B,KADF,CAXF,cAgBE,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAhBF,CADF,CADS,cAqBT,qDACE,oBAAC,MAAD,mBACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,eACE,0BAAI,KAAK,CAAE,CACTD,OAAO,CAAE,MADA,CAAX,0BADF,CADF,cAME,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EANF,CADF,CA3BN,CADF,CADF,CA2CD,CAtFD,CAwFA7B,QAAQ,CAAC+B,MAAT,cACE,oBAAC,GAAD,MADF,CAEEC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAFF"},"metadata":{},"sourceType":"module"}